<script>
        document.addEventListener("DOMContentLoaded", (event) => {
            gsap.registerPlugin(ScrollTrigger);

            // 1. FUNCIONES MODAL (NUEVO)
            window.openModal = function(id) {
                const modal = document.getElementById(id);
                const content = modal.querySelector('.modal-content');
                
                modal.classList.remove('hidden');
                // Pequeño timeout para permitir que el navegador procese el cambio de display antes de la opacidad
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    content.classList.remove('scale-95');
                    content.classList.add('scale-100');
                }, 10);
                document.body.style.overflow = 'hidden'; // Bloquear scroll de fondo
            }

            window.closeModal = function(id) {
                const modal = document.getElementById(id);
                const content = modal.querySelector('.modal-content');
                
                modal.classList.add('opacity-0');
                content.classList.remove('scale-100');
                content.classList.add('scale-95');
                
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300); // Esperar a que termine la animación
                document.body.style.overflow = 'auto'; // Reactivar scroll
            }

            // 2. CURSOR
            const dot = document.querySelector('.cursor-dot');
            const outline = document.querySelector('.cursor-outline');
            
            window.addEventListener('mousemove', (e) => {
                const x = e.clientX;
                const y = e.clientY;
                gsap.set(dot, { x: x, y: y }); 
                gsap.to(outline, { x: x, y: y, duration: 0.2 });
            });

            // Hover effects
            document.querySelectorAll('a, button, .project-card').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    gsap.to(outline, { scale: 1.5, borderColor: '#b026ff' });
                });
                el.addEventListener('mouseleave', () => {
                    gsap.to(outline, { scale: 1, borderColor: 'rgba(255,255,255,0.5)' });
                });
            });

            // 3. ANIMACIONES GENERALES
            const heroTl = gsap.timeline();
            heroTl.to('.hero-anim', { autoAlpha: 1, y: 0, duration: 1, stagger: 0.2, ease: "power3.out" });

            gsap.utils.toArray('.project-card').forEach((card, i) => {
                gsap.fromTo(card, 
                    { autoAlpha: 0, y: 50 },
                    { scrollTrigger: { trigger: card, start: "top 85%" }, autoAlpha: 1, y: 0, duration: 1, delay: i * 0.1 }
                );
            });
            
            gsap.utils.toArray('.service-item').forEach((item, i) => {
                gsap.fromTo(item, 
                    { autoAlpha: 0, y: 30 },
                    { scrollTrigger: { trigger: '#services', start: "top 75%" }, autoAlpha: 1, y: 0, duration: 1, delay: i * 0.2 }
                );
            });
        });
    </script>
